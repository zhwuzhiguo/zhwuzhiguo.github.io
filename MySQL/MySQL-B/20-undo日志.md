# 20-undo日志

## 20.1 事务回滚的需求

## 20.2 事务id
### 20.2.1 分配事务id的时机
### 20.2.2 事务id是怎么生成的
### 20.2.3 trx_id隐藏列

## 20.3 undo日志的格式
### 20.3.1 INSERT操作对应的undo日志
### 20.3.2 DELETE操作对应的undo日志
### 20.3.3 UPDATE操作对应的undo日志
### 20.3.4 增删改操作对二级索引的影响

## 20.4 通用链表结构

## 20.5 FIL_PAGE_UNDO_LOG页面

## 20.6 Undo页面链表
### 20.6.1 单个事务中的Undo页面链表
### 20.6.2 多个事务中的Undo页面链表

## 20.7 undo日志具体写入过程
### 20.7.1 段的概念
### 20.7.2 Undo Log Segment Header
### 20.7.3 Undo Log Header
### 20.7.4 小结

## 20.8 重用Undo页面

## 20.9 回滚段
### 20.9.1 回滚段的概念
### 20.9.2 从回滚段中申请Undo页面链表
### 20.9.3 多个回滚段
### 20.9.4 回滚段的分类
### 20.9.5 roll_pointer的组成
### 20.9.6 为事务分配Undo页面链表的详细过程

## 20.10 回滚段相关配置
### 20.10.1 配置回滚段数量
### 20.10.2 配置undo表空间

## 20.11 undo日志在崩溃恢复时的作用

## 20.12 总结

# 完