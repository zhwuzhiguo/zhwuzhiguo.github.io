# 05-深入浅出索引（下）

使用二级索引查询，再通过聚簇索引获取记录完整数据，这个回到聚簇索引搜索的过程，称为`回表`。

## 覆盖索引

当查询的字段在二级索引中都存在的时候，通过二级索引查询就不需要再去聚簇索引`回表`了，称为`覆盖索引`。

由于覆盖索引可以减少树的搜索次数，显著提升查询性能，所以`覆盖索引`是一个常用的性能优化手段。

## 最左前缀原则

B+ 树这种索引结构，可以利用索引的`最左前缀`来定位记录。

在建立联合索引的时候，如果通过调整索引字段顺序，可以少维护一个索引，那么这个顺序往往就是需要优先考虑采用的。

对于需要按字段 `(a,b)` 、 `(a)` 、 `(b)` 来查询的情况，可以建立如下索引：
- 方案一：联合索引`(a,b)` + 普通索引`(b)`
- 方案二：联合索引`(b,a)` + 普通索引`(a)`

选择那种方案，取决于字段`(a)`和字段`(b)`的大小，尽量选择占用空间小的字段建立普通索引，这样能节省索引的存储空间。

## 索引下推

`索引下推`是指通过二级索引查询的时候，通过索引中的其他字段(主键，联合索引的其他字段)对其他查询条件做判断，直接过滤掉不满足条件的记录，来减少`回表`次数。

## 小结

数据库索引的概念，包括`覆盖索引`、`前缀索引`、`索引下推`。

在满足语句需求的情况下，尽量少地访问资源是数据库设计的重要原则之一。

在设计表结构时，也要以减少资源消耗作为目标。

# 完